# ReportingWS
ReportingWS is a Spring Boot application which exposes a single service to generate reports based on the input. It uses an in memory database(H2) to store the reports. API documentation is generated by Swagger2 (see the related section for more detail).

## How to Build
- Clone the project with the following command: `git clone git@github.com:realfaydin/ReportingWS.git`
- If it is not already installed, install gradle (4.0 or higher)
- In the project directory, run `gradle clean build`. This should compile the project and run all the tests and generate the fat jar under "build/libs" directory.
- Please note that tests use the CSVs located in *src/test/resources/test_reports* directory
## How to Run
- Create a directory and copy the CSVs that are desired to be loaded
- In order to start up the application; in the project directory, run `java -DreportDirectory=file:$reportDirectory -jar ./build/libs/reporting-ws-0.1.0.jar`
- The endpoint for the service is: *http://localhost:8080/reports*
- H2 database can be accessed via URL: *http://localhost:8080/h2_console* while application is up and running.
- **Please note that you need to replace $reportDirectory with the actual directory that contains the CSVs.**
- Here are properties (and their default values) you can override by passing them as JVM parameters:
  - spring.h2.console.enabled=true
  - spring.h2.console.path=/h2_console
  - spring.datasource.url=jdbc:h2:file:~/h2/report_db //this is overridden in test.properties
  - spring.datasource.username=sa
  - spring.datasource.password=
  - spring.datasource.driverClassName=org.h2.Driver
  - spring.jpa.hibernate.ddl-auto = update
  - spring.jpa.show-sql=true
## Documentation
- The API documentation of the service is generated by Swagger2 and served online in the following URL while the application is up and running:
http://localhost:8080/swagger-ui.html#/report-controller
- You can use the console to post requests to the running application
## Design and Implementation Decisions
- The calculated metrics (CRT, CR, eCPM and FillRate) are calculated on the fly and not stored in the database.
- Aggregate reports are supported
- Year information is not taken into account
## Possible Improvements
- Better validation of parameters
- Better validation of CSV content
- Better documentation by providing more input to Swagger
- Better error handling
- Better test coverage
- BigDecimal instead of Double (might have precision problems)
- Limiting the on-the-fly calculation of metrics
- Adding some level of security to the API